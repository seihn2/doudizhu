# AIæ–—åœ°ä¸»é¡¹ç›®æ¶æ„è¯¦è§£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**æœ¬åœ°å•äººç‰ˆ**AIæ–—åœ°ä¸»æ¸¸æˆï¼Œä½¿ç”¨çº¯Pythonå®ç°ï¼Œé‡‡ç”¨**ç®—æ³•AI**è€Œéå¤§è¯­è¨€æ¨¡å‹APIã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢å±‚ (UI Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  æ¸¸æˆæ§åˆ¶å±‚ (Game Control)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  æ¸¸æˆé€»è¾‘å±‚ (Game Logic)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   AIå†³ç­–å±‚ (AI Layer)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  åŸºç¡€æ•°æ®å±‚ (Data Layer)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æ¨¡å—è¯¦ç»†è¯´æ˜

### 1. ç”¨æˆ·ç•Œé¢å±‚ (ui/)

**ui/console_ui.py** - ä¸»ç•Œé¢æ§åˆ¶å™¨
- è´Ÿè´£æ¸¸æˆçš„æ•´ä½“æµç¨‹æ§åˆ¶
- å¤„ç†ç”¨æˆ·è¾“å…¥å’Œç•Œé¢æ˜¾ç¤º
- æä¾›èœå•ç³»ç»Ÿã€è®¾ç½®ç®¡ç†ç­‰

**ui/utils.py** - ç•Œé¢å·¥å…·å‡½æ•°
- é¢œè‰²è¾“å‡ºã€è¡¨æ ¼æ˜¾ç¤º
- å¡ç‰Œæ ¼å¼åŒ–æ˜¾ç¤º
- ç”¨æˆ·è¾“å…¥éªŒè¯ç­‰å·¥å…·å‡½æ•°

```python
# ç¤ºä¾‹ï¼šç•Œé¢æ˜¾ç¤ºåŠŸèƒ½
def print_hand_cards(cards: List[Card], title: str = "ä½ çš„æ‰‹ç‰Œ"):
    print(f"\\n{Colors.BRIGHT}{title}:{Colors.RESET}")
    print(f"  {format_card_display(cards)}")
```

### 2. æ¸¸æˆæ§åˆ¶å±‚ (game/game_state.py)

**GameController** - æ¸¸æˆä¸»æ§åˆ¶å™¨
- ç®¡ç†æ¸¸æˆæ•´ä½“æµç¨‹
- æ§åˆ¶å›åˆåˆ‡æ¢
- å¤„ç†æ¸¸æˆçŠ¶æ€å˜åŒ–

**GameState** - æ¸¸æˆçŠ¶æ€ç®¡ç†
- å­˜å‚¨å½“å‰æ¸¸æˆçŠ¶æ€
- è®°å½•æ¸¸æˆå†å²
- ç®¡ç†ç©å®¶ä¿¡æ¯

```python
class GameController:
    def __init__(self):
        self.state = GameState()
        self.deck = Deck()

    def play_turn(self) -> bool:
        # æ‰§è¡Œä¸€ä¸ªå›åˆçš„é€»è¾‘
        current_player = self.state.get_current_player()
        cards_to_play = current_player.choose_cards_to_play(...)
```

### 3. æ¸¸æˆé€»è¾‘å±‚ (game/)

**game/cards.py** - å¡ç‰Œç³»ç»Ÿ
- å®šä¹‰å¡ç‰Œç±»å’Œç‰Œå †ç±»
- å®ç°æ´—ç‰Œã€å‘ç‰ŒåŠŸèƒ½
- æä¾›æ‰‹ç‰Œç®¡ç†

**game/rules.py** - è§„åˆ™å¼•æ“
- ç‰Œå‹è¯†åˆ«å’ŒéªŒè¯
- ç‰Œå‹å¤§å°æ¯”è¾ƒ
- å‡ºç‰Œåˆæ³•æ€§æ£€æŸ¥

**game/player.py** - ç©å®¶åŸºç±»
- å®šä¹‰ç©å®¶æ¥å£
- å®ç°åŸºç¡€ç©å®¶è¡Œä¸º

```python
class RuleEngine:
    @staticmethod
    def analyze_cards(cards: List[Card]) -> CardPattern:
        # åˆ†æç‰Œå‹ï¼šå•å¼ ã€å¯¹å­ã€ä¸‰å¼ ã€é¡ºå­ç­‰

    @staticmethod
    def can_follow(current_cards: List[Card], last_pattern: CardPattern) -> bool:
        # æ£€æŸ¥æ˜¯å¦å¯ä»¥è·Ÿä¸Šä¸€æ‰‹ç‰Œ
```

### 4. AIå†³ç­–å±‚ (ai/)

**ai/ai_player.py** - AIç©å®¶å®ç°
- ç»§æ‰¿PlayeråŸºç±»
- é›†æˆAIç­–ç•¥
- æ¨¡æ‹Ÿäººç±»æ€è€ƒæ—¶é—´

**ai/strategy.py** - AIç­–ç•¥æ ¸å¿ƒ
- ä¸åŒéš¾åº¦çš„å†³ç­–ç®—æ³•
- å«åœ°ä¸»ç­–ç•¥
- å‡ºç‰Œç­–ç•¥é€‰æ‹©

**ai/card_analyzer.py** - ç‰Œå‹åˆ†æå™¨
- æ‰‹ç‰Œç»“æ„åˆ†æ
- ç‰Œå‹ç»„åˆè¯„ä¼°
- è·èƒœæ¦‚ç‡è®¡ç®—

```python
class AIStrategy:
    def choose_cards_to_play(self, hand_cards, last_pattern, game_state):
        if last_pattern is None:
            return self._choose_active_play(hand_cards, game_state)
        else:
            return self._choose_follow_play(hand_cards, last_pattern, game_state)
```

## ğŸ¤– AIå®ç°æœºåˆ¶

### å½“å‰AIç±»å‹ï¼šç®—æ³•AI

**ç‰¹ç‚¹ï¼š**
- âœ… åŸºäºè§„åˆ™å’Œå¯å‘å¼ç®—æ³•
- âœ… å¿«é€Ÿå“åº”ï¼ˆæ¯«ç§’çº§ï¼‰
- âœ… å®Œå…¨æœ¬åœ°è¿è¡Œ
- âœ… æ— ç½‘ç»œä¾èµ–

### AIå†³ç­–æµç¨‹

```
è¾“å…¥ï¼šæ‰‹ç‰Œ + æ¸¸æˆçŠ¶æ€ + ä¸Šä¸€æ‰‹ç‰Œ
    â†“
1. ç‰Œå‹ç»“æ„åˆ†æ
    â†“
2. ç­–ç•¥é€‰æ‹©ï¼ˆæ ¹æ®éš¾åº¦ï¼‰
    â†“
3. å€™é€‰æ–¹æ¡ˆç”Ÿæˆ
    â†“
4. æ–¹æ¡ˆè¯„ä¼°å’Œç­›é€‰
    â†“
è¾“å‡ºï¼šæœ€ä¼˜å‡ºç‰Œå†³ç­–
```

### AIéš¾åº¦å®ç°

**ç®€å•éš¾åº¦ï¼š**
- éšæœºæ€§è¾ƒå¼º
- åŸºç¡€å‡ºç‰Œç­–ç•¥
- 50%æ¦‚ç‡è·Ÿç‰Œ

**ä¸­ç­‰éš¾åº¦ï¼š**
- å¹³è¡¡çš„ç­–ç•¥é€‰æ‹©
- è€ƒè™‘ç‰Œå‹ç»„åˆ
- é€‚åº¦çš„é£é™©æ§åˆ¶

**å›°éš¾éš¾åº¦ï¼š**
- å¤æ‚çš„åšå¼ˆåˆ†æ
- è®°å¿†å¯¹æ‰‹å‡ºç‰Œ
- é«˜çº§ç­–ç•¥ç»„åˆ

## ğŸ”Œ å¦‚ä½•æ¥å…¥å¤§è¯­è¨€æ¨¡å‹API

å¦‚æœä½ æƒ³è¦æ¥å…¥GPTã€Claudeç­‰å¤§è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼æ‰©å±•ï¼š

### 1. åˆ›å»ºLLM AIç©å®¶

```python
# ai/llm_player.py
class LLMPlayer(Player):
    def __init__(self, name: str, player_id: int, api_config: dict):
        super().__init__(name, player_id)
        self.api_client = self._setup_api_client(api_config)

    def choose_cards_to_play(self, last_pattern, game_state):
        # æ„å»ºæç¤ºè¯
        prompt = self._build_prompt(game_state, last_pattern)

        # è°ƒç”¨API
        response = self.api_client.chat_completion(prompt)

        # è§£æå“åº”
        return self._parse_ai_response(response)
```

### 2. APIé…ç½®ç¤ºä¾‹

```python
# config.py
LLM_CONFIG = {
    "provider": "openai",  # æˆ– "anthropic", "deepseek"
    "api_key": "your-api-key",
    "model": "gpt-4o-mini",
    "base_url": "https://api.openai.com/v1",
    "max_tokens": 1000,
    "temperature": 0.7
}
```

### 3. æç¤ºè¯å·¥ç¨‹

```python
def _build_prompt(self, game_state, last_pattern):
    prompt = f'''ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–—åœ°ä¸»AIç©å®¶ã€‚

## å½“å‰æ¸¸æˆçŠ¶æ€
- ä½ çš„æ‰‹ç‰Œï¼š{self.format_hand_cards()}
- ä½ çš„è§’è‰²ï¼š{"åœ°ä¸»" if self.is_landlord else "å†œæ°‘"}
- å…¶ä»–ç©å®¶æ‰‹ç‰Œæ•°ï¼š{game_state["players_card_count"]}

## ä¸Šä¸€æ‰‹ç‰Œ
{self.format_last_pattern(last_pattern) if last_pattern else "æ— äººå‡ºç‰Œï¼Œä½ å¯ä»¥ä¸»åŠ¨å‡ºç‰Œ"}

## è¯·é€‰æ‹©å‡ºç‰Œ
è¯·åˆ†æå±€åŠ¿å¹¶é€‰æ‹©æœ€ä¼˜å‡ºç‰Œç­–ç•¥ï¼Œä»¥JSONæ ¼å¼è¿”å›ï¼š
{{
    "action": "play_cards" | "pass",
    "cards": [3, 4, 5],  // ç‰Œå€¼æ•°ç»„
    "reasoning": "å‡ºç‰Œç†ç”±"
}}'''
    return prompt
```

## ğŸš€ æ‰©å±•å»ºè®®

### 1. æ··åˆAIæ¨¡å¼
- ç»“åˆç®—æ³•AIå’ŒLLM AI
- æ ¹æ®æ¸¸æˆé˜¶æ®µé€‰æ‹©ä¸åŒAIç±»å‹
- æä¾›æ›´ä¸°å¯Œçš„æ¸¸æˆä½“éªŒ

### 2. AIè®­ç»ƒæ•°æ®æ”¶é›†
- è®°å½•äººç±»ç©å®¶çš„æ¸¸æˆæ•°æ®
- åˆ†ææœ€ä¼˜ç­–ç•¥
- ç”¨äºæ”¹è¿›AIç®—æ³•

### 3. å¤šæ¨¡å‹æ”¯æŒ
- æ”¯æŒå¤šä¸ªLLMæä¾›å•†
- å®ç°æ¨¡å‹é™çº§å’Œæ•…éšœè½¬ç§»
- æˆæœ¬æ§åˆ¶å’Œä¼˜åŒ–

## ğŸ“Š æ€§èƒ½ç‰¹ç‚¹

| ç‰¹æ€§ | ç®—æ³•AI | LLM AI |
|------|--------|--------|
| å“åº”é€Ÿåº¦ | æ¯«ç§’çº§ | 1-5ç§’ |
| è¿è¡Œæˆæœ¬ | å…è´¹ | APIè´¹ç”¨ |
| ç½‘ç»œä¾èµ– | æ—  | éœ€è¦ |
| ç­–ç•¥å¤æ‚åº¦ | ä¸­ç­‰ | å¾ˆé«˜ |
| å¯è§£é‡Šæ€§ | é«˜ | ä¸­ç­‰ |
| ä¸ªæ€§åŒ– | ä½ | å¾ˆé«˜ |

## ğŸ® æ¸¸æˆä½“éªŒ

å½“å‰çš„ç®—æ³•AIå·²ç»èƒ½å¤Ÿæä¾›ï¼š
- åˆç†çš„å«åœ°ä¸»å†³ç­–
- æ™ºèƒ½çš„å‡ºç‰Œé€‰æ‹©
- ä¸åŒéš¾åº¦çš„æŒ‘æˆ˜æ€§
- æµç•…çš„æ¸¸æˆä½“éªŒ

å¦‚æœä½ éœ€è¦æ¥å…¥å¤§è¯­è¨€æ¨¡å‹APIï¼Œæˆ‘å¯ä»¥å¸®ä½ å®ç°å…·ä½“çš„ä»£ç ã€‚ä½ æ›´å€¾å‘äºå“ªç§AIå®ç°æ–¹å¼ï¼Ÿ